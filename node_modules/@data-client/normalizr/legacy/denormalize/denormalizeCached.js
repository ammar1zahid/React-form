import GlobalCache from './globalCache.js';
import getUnvisit from './unvisit.js';
import WeakEntityMap, { getEntities } from '../WeakEntityMap.js';

// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types
export function denormalize(input, schema, entities, entityCache = {}, resultCache = new WeakEntityMap(), args = []) {
  // undefined means don't do anything
  if (schema === undefined) {
    return {
      data: input,
      paths: []
    };
  }
  if (input === undefined) {
    return {
      data: undefined,
      paths: []
    };
  }
  const getEntity = getEntities(entities);
  return getUnvisit(getEntity, new GlobalCache(getEntity, entityCache, resultCache), args)(input, schema);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJHbG9iYWxDYWNoZSIsImdldFVudmlzaXQiLCJXZWFrRW50aXR5TWFwIiwiZ2V0RW50aXRpZXMiLCJkZW5vcm1hbGl6ZSIsImlucHV0Iiwic2NoZW1hIiwiZW50aXRpZXMiLCJlbnRpdHlDYWNoZSIsInJlc3VsdENhY2hlIiwiYXJncyIsInVuZGVmaW5lZCIsImRhdGEiLCJwYXRocyIsImdldEVudGl0eSJdLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kZW5vcm1hbGl6ZS9kZW5vcm1hbGl6ZUNhY2hlZC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgR2xvYmFsQ2FjaGUgZnJvbSAnLi9nbG9iYWxDYWNoZS5qcyc7XG5pbXBvcnQgZ2V0VW52aXNpdCBmcm9tICcuL3VudmlzaXQuanMnO1xuaW1wb3J0IHR5cGUgeyBTY2hlbWEgfSBmcm9tICcuLi9pbnRlcmZhY2UuanMnO1xuaW1wb3J0IHR5cGUgeyBEZW5vcm1hbGl6ZU51bGxhYmxlLCBEZW5vcm1hbGl6ZUNhY2hlLCBQYXRoIH0gZnJvbSAnLi4vdHlwZXMuanMnO1xuaW1wb3J0IFdlYWtFbnRpdHlNYXAsIHsgZ2V0RW50aXRpZXMgfSBmcm9tICcuLi9XZWFrRW50aXR5TWFwLmpzJztcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9leHBsaWNpdC1tb2R1bGUtYm91bmRhcnktdHlwZXNcbmV4cG9ydCBmdW5jdGlvbiBkZW5vcm1hbGl6ZTxTIGV4dGVuZHMgU2NoZW1hPihcbiAgaW5wdXQ6IHVua25vd24sXG4gIHNjaGVtYTogUyB8IHVuZGVmaW5lZCxcbiAgZW50aXRpZXM6IGFueSxcbiAgZW50aXR5Q2FjaGU6IERlbm9ybWFsaXplQ2FjaGVbJ2VudGl0aWVzJ10gPSB7fSxcbiAgcmVzdWx0Q2FjaGU6IERlbm9ybWFsaXplQ2FjaGVbJ3Jlc3VsdHMnXVtzdHJpbmddID0gbmV3IFdlYWtFbnRpdHlNYXAoKSxcbiAgYXJnczogcmVhZG9ubHkgYW55W10gPSBbXSxcbik6IHtcbiAgZGF0YTogRGVub3JtYWxpemVOdWxsYWJsZTxTPiB8IHN5bWJvbDtcbiAgcGF0aHM6IFBhdGhbXTtcbn0ge1xuICAvLyB1bmRlZmluZWQgbWVhbnMgZG9uJ3QgZG8gYW55dGhpbmdcbiAgaWYgKHNjaGVtYSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHsgZGF0YTogaW5wdXQgYXMgYW55LCBwYXRoczogW10gfTtcbiAgfVxuICBpZiAoaW5wdXQgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB7IGRhdGE6IHVuZGVmaW5lZCBhcyBhbnksIHBhdGhzOiBbXSB9O1xuICB9XG4gIGNvbnN0IGdldEVudGl0eSA9IGdldEVudGl0aWVzKGVudGl0aWVzKTtcblxuICByZXR1cm4gZ2V0VW52aXNpdChcbiAgICBnZXRFbnRpdHksXG4gICAgbmV3IEdsb2JhbENhY2hlKGdldEVudGl0eSwgZW50aXR5Q2FjaGUsIHJlc3VsdENhY2hlKSxcbiAgICBhcmdzLFxuICApKGlucHV0LCBzY2hlbWEpO1xufVxuIl0sIm1hcHBpbmdzIjoiQUFBQSxPQUFPQSxXQUFXLE1BQU0sa0JBQWtCO0FBQzFDLE9BQU9DLFVBQVUsTUFBTSxjQUFjO0FBR3JDLE9BQU9DLGFBQWEsSUFBSUMsV0FBVyxRQUFRLHFCQUFxQjs7QUFFaEU7QUFDQSxPQUFPLFNBQVNDLFdBQVdBLENBQ3pCQyxLQUFjLEVBQ2RDLE1BQXFCLEVBQ3JCQyxRQUFhLEVBQ2JDLFdBQXlDLEdBQUcsQ0FBQyxDQUFDLEVBQzlDQyxXQUFnRCxHQUFHLElBQUlQLGFBQWEsQ0FBQyxDQUFDLEVBQ3RFUSxJQUFvQixHQUFHLEVBQUUsRUFJekI7RUFDQTtFQUNBLElBQUlKLE1BQU0sS0FBS0ssU0FBUyxFQUFFO0lBQ3hCLE9BQU87TUFBRUMsSUFBSSxFQUFFUCxLQUFZO01BQUVRLEtBQUssRUFBRTtJQUFHLENBQUM7RUFDMUM7RUFDQSxJQUFJUixLQUFLLEtBQUtNLFNBQVMsRUFBRTtJQUN2QixPQUFPO01BQUVDLElBQUksRUFBRUQsU0FBZ0I7TUFBRUUsS0FBSyxFQUFFO0lBQUcsQ0FBQztFQUM5QztFQUNBLE1BQU1DLFNBQVMsR0FBR1gsV0FBVyxDQUFDSSxRQUFRLENBQUM7RUFFdkMsT0FBT04sVUFBVSxDQUNmYSxTQUFTLEVBQ1QsSUFBSWQsV0FBVyxDQUFDYyxTQUFTLEVBQUVOLFdBQVcsRUFBRUMsV0FBVyxDQUFDLEVBQ3BEQyxJQUNGLENBQUMsQ0FBQ0wsS0FBSyxFQUFFQyxNQUFNLENBQUM7QUFDbEIifQ==