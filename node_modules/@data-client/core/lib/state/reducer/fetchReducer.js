import createOptimistic from '../../controller/createOptimistic.js';
export function fetchReducer(state, action) {
  let receiveAction;
  if (action.endpoint.getOptimisticResponse && action.endpoint.sideEffect) {
    receiveAction = createOptimistic(action.endpoint, {
      args: action.meta.args,
      fetchedAt: action.meta.createdAt
    });
  } else {
    // If 'fetch' action reaches the reducer there are no middlewares installed to handle it
    /* istanbul ignore next */
    if (process.env.NODE_ENV !== 'production') {
      console.warn('Fetch appears unhandled - you are likely missing the NetworkManager middleware');
      console.warn('See https://resthooks.io/docs/guides/redux#indextsx for hooking up redux');
    }
    return state;
  }
  return {
    ...state,
    optimistic: [...state.optimistic, receiveAction]
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjcmVhdGVPcHRpbWlzdGljIiwiZmV0Y2hSZWR1Y2VyIiwic3RhdGUiLCJhY3Rpb24iLCJyZWNlaXZlQWN0aW9uIiwiZW5kcG9pbnQiLCJnZXRPcHRpbWlzdGljUmVzcG9uc2UiLCJzaWRlRWZmZWN0IiwiYXJncyIsIm1ldGEiLCJmZXRjaGVkQXQiLCJjcmVhdGVkQXQiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJjb25zb2xlIiwid2FybiIsIm9wdGltaXN0aWMiXSwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvc3RhdGUvcmVkdWNlci9mZXRjaFJlZHVjZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNyZWF0ZU9wdGltaXN0aWMgZnJvbSAnLi4vLi4vY29udHJvbGxlci9jcmVhdGVPcHRpbWlzdGljLmpzJztcbmltcG9ydCB0eXBlIHtcbiAgU3RhdGUsXG4gIFJlY2VpdmVBY3Rpb24sXG4gIE9wdGltaXN0aWNBY3Rpb24sXG4gIEZldGNoQWN0aW9uLFxufSBmcm9tICcuLi8uLi90eXBlcy5qcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBmZXRjaFJlZHVjZXIoc3RhdGU6IFN0YXRlPHVua25vd24+LCBhY3Rpb246IEZldGNoQWN0aW9uKSB7XG4gIGxldCByZWNlaXZlQWN0aW9uOiBSZWNlaXZlQWN0aW9uIHwgT3B0aW1pc3RpY0FjdGlvbjtcblxuICBpZiAoYWN0aW9uLmVuZHBvaW50LmdldE9wdGltaXN0aWNSZXNwb25zZSAmJiBhY3Rpb24uZW5kcG9pbnQuc2lkZUVmZmVjdCkge1xuICAgIHJlY2VpdmVBY3Rpb24gPSBjcmVhdGVPcHRpbWlzdGljKGFjdGlvbi5lbmRwb2ludCwge1xuICAgICAgYXJnczogYWN0aW9uLm1ldGEuYXJncyxcbiAgICAgIGZldGNoZWRBdDogYWN0aW9uLm1ldGEuY3JlYXRlZEF0LFxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIC8vIElmICdmZXRjaCcgYWN0aW9uIHJlYWNoZXMgdGhlIHJlZHVjZXIgdGhlcmUgYXJlIG5vIG1pZGRsZXdhcmVzIGluc3RhbGxlZCB0byBoYW5kbGUgaXRcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICdGZXRjaCBhcHBlYXJzIHVuaGFuZGxlZCAtIHlvdSBhcmUgbGlrZWx5IG1pc3NpbmcgdGhlIE5ldHdvcmtNYW5hZ2VyIG1pZGRsZXdhcmUnLFxuICAgICAgKTtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgJ1NlZSBodHRwczovL3Jlc3Rob29rcy5pby9kb2NzL2d1aWRlcy9yZWR1eCNpbmRleHRzeCBmb3IgaG9va2luZyB1cCByZWR1eCcsXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBzdGF0ZTtcbiAgfVxuICByZXR1cm4ge1xuICAgIC4uLnN0YXRlLFxuICAgIG9wdGltaXN0aWM6IFsuLi5zdGF0ZS5vcHRpbWlzdGljLCByZWNlaXZlQWN0aW9uXSxcbiAgfTtcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBT0EsZ0JBQWdCLE1BQU0sc0NBQXNDO0FBUW5FLE9BQU8sU0FBU0MsWUFBWUEsQ0FBQ0MsS0FBcUIsRUFBRUMsTUFBbUIsRUFBRTtFQUN2RSxJQUFJQyxhQUErQztFQUVuRCxJQUFJRCxNQUFNLENBQUNFLFFBQVEsQ0FBQ0MscUJBQXFCLElBQUlILE1BQU0sQ0FBQ0UsUUFBUSxDQUFDRSxVQUFVLEVBQUU7SUFDdkVILGFBQWEsR0FBR0osZ0JBQWdCLENBQUNHLE1BQU0sQ0FBQ0UsUUFBUSxFQUFFO01BQ2hERyxJQUFJLEVBQUVMLE1BQU0sQ0FBQ00sSUFBSSxDQUFDRCxJQUFJO01BQ3RCRSxTQUFTLEVBQUVQLE1BQU0sQ0FBQ00sSUFBSSxDQUFDRTtJQUN6QixDQUFDLENBQUM7RUFDSixDQUFDLE1BQU07SUFDTDtJQUNBO0lBQ0EsSUFBSUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFFBQVEsS0FBSyxZQUFZLEVBQUU7TUFDekNDLE9BQU8sQ0FBQ0MsSUFBSSxDQUNWLGdGQUNGLENBQUM7TUFDREQsT0FBTyxDQUFDQyxJQUFJLENBQ1YsMEVBQ0YsQ0FBQztJQUNIO0lBRUEsT0FBT2QsS0FBSztFQUNkO0VBQ0EsT0FBTztJQUNMLEdBQUdBLEtBQUs7SUFDUmUsVUFBVSxFQUFFLENBQUMsR0FBR2YsS0FBSyxDQUFDZSxVQUFVLEVBQUViLGFBQWE7RUFDakQsQ0FBQztBQUNIIn0=